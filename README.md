# hanghae99-chapter1-9th
항해99-웹미니프로젝트-9조


# 동네 빵집

세상엔 맛잇는 빵집이 너무 많고 ~ 하늘아래 같은 빵맛은 없다 !

빵순이 빵돌이들을 위해 우리동네 빵 맛집을 추천해드립니다.


# 1. 제작기간 & 팀원 소개

- 2022년 3월 7일 ~ 2022년 3월 10일 (총4일)

- 4인 1조 팀 프로젝트

     황인호 : 빵집 포스팅 기능,사진 파일 업로드 기능

     김정태 : 상세페이지 제작, 포스팅 기능구현, 지도 검색 기능 구현, API키발급 및 응답 데이터 처리, DB관리
  
     이덕행 : 회원가입, 로그인, 로그아웃 기능구현, 전체 CSS 마무리(레이아웃 디자인, 모바일 전환 등)

     이미란 : 검색기능, 검색필터 기능




# 2. 사용 기술 


- Back-end

     python 3

     Flask (python frame work)

     MongoDB


- Front-end

     bootstrap

     bulma

     JQuery

     AJAX

     AWS EC2




# 3. 핵심기능

- 회원가입 및 로그인

  * JWT방식을 이용하여 토큰을 생성해 로그인과 회원가입을 구현하였습니다.
    회원가입시 아이디를 중복하였는지 확인 가능하고 글자수와 영문, 숫자, 특수문자 확인 가능합니다.
  * jQuery 플러그인 사용하여 토큰을 제거하는 방식으로 로그아웃을 구현하였습니다.

- 서브페이지 기능

     구현 방법 작성


- 추천 빵집 포스팅 기능 (사진 파일 업로드 기능)
index3.html(메인페이지)와 <button>으로 index4.html(등록하기) 연결 후 index4.html 에서입력한(POST) DATA 몽고DB저장 및 index3.html로 붙여넣기(GET)
사용자가 사진등록시 index3.html 에사진 보이게 기능구현

- 지도 기능

     포스팅 시 X,Y 좌표를 디비에 저장하였고 상세페이지 구현 시 GEOCODE를 이용해 좌표를 지도위에 표시하였습니다.


- 검색 필터 및 검색 기능

  * 클라이언트에서 입력 데이터를 전달하기 위해서 query parameter를 url에 덧붙여서 전달하였습니다.
    서버에서는 클라에서 보내준 키워드를 받아 빵집 전체 목록 중 빵집 이름과 일치하는 결과를 찾아내고,
    딕셔너리 형태로 만들어 전달하였습니다.



# 4. 실행 정보

 - https://youtu.be/Gw3yX0vOxrQ




# 5. 프로젝트 과정 중 이슈 사항

Q. 검색 기능 구현 중 해당 검색어와 일치하는 데이터만 찾아서 불러와야 하는데 어떤 식으로 검색어 정보를 서버에 전달할 수 있을까?

A. 처음에는 서버에서 전체 목록을 불러와서 클라이언트에서 filter함수를 사용해 검색어와 일치하는 데이터를 includes 하고 있는 정보를 리스팅 하려고 시도했었는데, 콘솔에 찍는 것까진 성공했으나, 실제로 이걸 리스트로 보여주는 방법을 찾지 못하였습니다. 그래서 서버에서 전체 데이터를 불러오는 것은 비효율적이라는 기술매니저님의 조언을 듣고 Query String 방법으로 시도를했고, 해결하였습니다. 
 검색 필터 기능은 구글링 끝에 getElementById, getElementsByClassName라는 내장함수를 알게되어 구글에 계신 선생님들의 조언대로 구현해 보았습니다 검색 기능 구현시 indexOf라는 함수를 사용하는 것 같은데 이부분은 조금 더 사용법 숙지가 필요할 것 같습니다. 

Q. 메인페이지에서 로그아웃을 위해 토큰을 제거하려 하는데 타입에러 오류가 발생.

A. 메인페이지에서 저장되어있는 토큰을 인식하지 못해서 아래 코드를 추가해주어 jQuery플러그인 기능 사용하여 제거했습니다.
   ```python 
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
   ```
Q. 이미지 파일을 서버에 Data저장시 이미지 파일명이 fakepath로 저장되는 오류 발생.
     
A. 기존의 Data를 저장하는 형식으로 저장하였으나 정상적으로 반영이되지않았고 해당내용의 Data저장방식을 let form_data = newFormData형식으로 수정하고
이미지로 저장하고 html에 사진이 나올수있도록 반영함
     
Q. 상세페이지를 만들 때 각 포스팅마다 고유한 정보를 불러오도록 해야하는데 어떻게 해야할까?
 
A.
  - 포스팅할 때 각 게시글마다 고유한 number를 부여하였고 해당 number를 도메인과 매칭시켜주었습니다.
  - 상세보기를 누르면 href = 현재url?num_give=고유number로 이동하도록 하였습니다.

Q. 포스팅할 때 지도좌표를 찍어왔는데 해당 좌표를 불러와서 지도에 보여주려면 어떻게 해야할까?

A. 네이버, 카카오에서 지원하는 Cloud Platform에서 올라와있는 geocode를 사용했습니다. DB에 저장된 X축, Y축의 정보를 불러와 지오코드에 실어보내고 정확한 위치정보를 받아왔습니다.

Q. localhost:5000에서는 정상작동하는데 도메인을 연결하니 지도 api가 없다고 나오는데 어떻게 해야할까?

A. 부여받은 API KEY는 등록한 사이트에서만 작동하는 것을 알고 해당 플랫폼에서 도메인을 등록해주었습니다.


